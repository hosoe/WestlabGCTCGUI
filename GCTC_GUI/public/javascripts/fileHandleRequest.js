//using jQuery

$('#formReadJson').submit(function() { // call postReadJson when a formReadJson's send button is pushed
  postReadJson();
  return false;
});

function postReadJson() { // POST /readjson to send filename to be read on the server
  var filename = $('#textReadJson').val(); // get value from text form
  // $('#textLM').val(''); // clear form
  console.log('require:' + filename + 'via POST');
  $.post('/readjson', { filename: filename }, function(res) { //access post /readjson with value
    console.log('received responce: ' + res + ' from server');

    if (res) {
      console.log('received valid data');
      var obj = JSON.parse(res);
      // for (var soto in obj){
      // 	console.log(obj[soto]);
      // 	for (var naka in soto){
      // 		console.log(soto[naka]);
      // 	}
      // }
      var callbackFunc = function() {
      	document.getElementById('test-callback').innerHTML = '<h3>JSON table generated by a callback function</h3>';
      };
      JsonToHtmlTable(document.getElementById('test-table'), obj, callbackFunc);

    } else {
      console.log('received invalid data');
    }
  });

}


$('#formWriteJson').submit(function() { // call postWriteJson when a formWriteJson's send button is pushed
  postWriteJson();
  return false;
});

function postWriteJson() { // POST /WriteJson to send filename to be read on the server
  // var filename = $('#textWriteJson').val(); // get value from text form
  // $('#textLM').val(''); // clear form
  // console.log('require:' + filename + 'via POST');
  var content = '{"testStr" : "testStr"}';
  $.post('/writejson', { content: content }, function(res) { //access post /WriteJson with value
    console.log('received responce: ' + res + ' from server');
  });
}